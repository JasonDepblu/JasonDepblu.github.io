{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ChatInput(_ref){let{onSendMessage,disabled}=_ref;const[message,setMessage]=useState('');const textareaRef=useRef(null);// 自动调整文本区域高度\nuseEffect(()=>{if(textareaRef.current){textareaRef.current.style.height='auto';textareaRef.current.style.height=`${Math.min(textareaRef.current.scrollHeight,200)}px`;}},[message]);// 处理提交\nconst handleSubmit=e=>{e.preventDefault();if(message.trim()&&!disabled){onSendMessage(message.trim());setMessage('');// 重置文本区域高度\nif(textareaRef.current){textareaRef.current.style.height='auto';}}};// 处理键盘事件\nconst handleKeyDown=e=>{// Ctrl+Enter 或 在移动设备上直接 Enter 发送\nif(e.key==='Enter'||window.innerWidth<=768&&e.key==='Enter'&&!e.shiftKey){e.preventDefault();handleSubmit(e);}};return/*#__PURE__*/_jsxs(\"div\",{id:\"input-area\",children:[/*#__PURE__*/_jsx(\"textarea\",{ref:textareaRef,id:\"question\",value:message,onChange:e=>setMessage(e.target.value),onKeyDown:handleKeyDown,placeholder:\"\\u8BF7\\u8F93\\u5165\\u60A8\\u7684\\u95EE\\u9898...\",disabled:disabled}),/*#__PURE__*/_jsx(\"button\",{id:\"send-btn\",onClick:handleSubmit,disabled:!message.trim()||disabled,children:disabled?'处理中...':'提交'})]});}export default ChatInput;","map":{"version":3,"names":["React","useState","useEffect","useRef","jsx","_jsx","jsxs","_jsxs","ChatInput","_ref","onSendMessage","disabled","message","setMessage","textareaRef","current","style","height","Math","min","scrollHeight","handleSubmit","e","preventDefault","trim","handleKeyDown","key","window","innerWidth","shiftKey","id","children","ref","value","onChange","target","onKeyDown","placeholder","onClick"],"sources":["/Users/depblu/Documents/GitHub/JasonDepblu.github.io/src/components/ChatInput.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\n\nfunction ChatInput({ onSendMessage, disabled }) {\n  const [message, setMessage] = useState('');\n  const textareaRef = useRef(null);\n\n  // 自动调整文本区域高度\n  useEffect(() => {\n    if (textareaRef.current) {\n      textareaRef.current.style.height = 'auto';\n      textareaRef.current.style.height = `${Math.min(textareaRef.current.scrollHeight, 200)}px`;\n    }\n  }, [message]);\n\n  // 处理提交\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (message.trim() && !disabled) {\n      onSendMessage(message.trim());\n      setMessage('');\n\n      // 重置文本区域高度\n      if (textareaRef.current) {\n        textareaRef.current.style.height = 'auto';\n      }\n    }\n  };\n\n  // 处理键盘事件\n  const handleKeyDown = (e) => {\n    // Ctrl+Enter 或 在移动设备上直接 Enter 发送\n    if ((e.key === 'Enter') ||\n        (window.innerWidth <= 768 && e.key === 'Enter' && !e.shiftKey)) {\n      e.preventDefault();\n      handleSubmit(e);\n    }\n  };\n\n  return (\n    <div id=\"input-area\">\n      <textarea\n        ref={textareaRef}\n        id=\"question\"\n        value={message}\n        onChange={(e) => setMessage(e.target.value)}\n        onKeyDown={handleKeyDown}\n        placeholder=\"请输入您的问题...\"\n        disabled={disabled}\n      />\n      <button\n        id=\"send-btn\"\n        onClick={handleSubmit}\n        disabled={!message.trim() || disabled}\n      >\n        {disabled ? '处理中...' : '提交'}\n      </button>\n    </div>\n  );\n}\n\nexport default ChatInput;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3D,QAAS,CAAAC,SAASA,CAAAC,IAAA,CAA8B,IAA7B,CAAEC,aAAa,CAAEC,QAAS,CAAC,CAAAF,IAAA,CAC5C,KAAM,CAACG,OAAO,CAAEC,UAAU,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAAAa,WAAW,CAAGX,MAAM,CAAC,IAAI,CAAC,CAEhC;AACAD,SAAS,CAAC,IAAM,CACd,GAAIY,WAAW,CAACC,OAAO,CAAE,CACvBD,WAAW,CAACC,OAAO,CAACC,KAAK,CAACC,MAAM,CAAG,MAAM,CACzCH,WAAW,CAACC,OAAO,CAACC,KAAK,CAACC,MAAM,CAAG,GAAGC,IAAI,CAACC,GAAG,CAACL,WAAW,CAACC,OAAO,CAACK,YAAY,CAAE,GAAG,CAAC,IAAI,CAC3F,CACF,CAAC,CAAE,CAACR,OAAO,CAAC,CAAC,CAEb;AACA,KAAM,CAAAS,YAAY,CAAIC,CAAC,EAAK,CAC1BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,GAAIX,OAAO,CAACY,IAAI,CAAC,CAAC,EAAI,CAACb,QAAQ,CAAE,CAC/BD,aAAa,CAACE,OAAO,CAACY,IAAI,CAAC,CAAC,CAAC,CAC7BX,UAAU,CAAC,EAAE,CAAC,CAEd;AACA,GAAIC,WAAW,CAACC,OAAO,CAAE,CACvBD,WAAW,CAACC,OAAO,CAACC,KAAK,CAACC,MAAM,CAAG,MAAM,CAC3C,CACF,CACF,CAAC,CAED;AACA,KAAM,CAAAQ,aAAa,CAAIH,CAAC,EAAK,CAC3B;AACA,GAAKA,CAAC,CAACI,GAAG,GAAK,OAAO,EACjBC,MAAM,CAACC,UAAU,EAAI,GAAG,EAAIN,CAAC,CAACI,GAAG,GAAK,OAAO,EAAI,CAACJ,CAAC,CAACO,QAAS,CAAE,CAClEP,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBF,YAAY,CAACC,CAAC,CAAC,CACjB,CACF,CAAC,CAED,mBACEf,KAAA,QAAKuB,EAAE,CAAC,YAAY,CAAAC,QAAA,eAClB1B,IAAA,aACE2B,GAAG,CAAElB,WAAY,CACjBgB,EAAE,CAAC,UAAU,CACbG,KAAK,CAAErB,OAAQ,CACfsB,QAAQ,CAAGZ,CAAC,EAAKT,UAAU,CAACS,CAAC,CAACa,MAAM,CAACF,KAAK,CAAE,CAC5CG,SAAS,CAAEX,aAAc,CACzBY,WAAW,CAAC,+CAAY,CACxB1B,QAAQ,CAAEA,QAAS,CACpB,CAAC,cACFN,IAAA,WACEyB,EAAE,CAAC,UAAU,CACbQ,OAAO,CAAEjB,YAAa,CACtBV,QAAQ,CAAE,CAACC,OAAO,CAACY,IAAI,CAAC,CAAC,EAAIb,QAAS,CAAAoB,QAAA,CAErCpB,QAAQ,CAAG,QAAQ,CAAG,IAAI,CACrB,CAAC,EACN,CAAC,CAEV,CAEA,cAAe,CAAAH,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}