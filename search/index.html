<body class="post-layout">
<!--     Header -->
    <header class="header">
      <div class="container">
        <span class="logo">ðŸŒŸ Jason's Blog</span>
        <nav class="nav">
          <ul>
            
              <li><a href="/myblog/">Posts</a></li>
            
              <li><a href="/myblog/archive/">Archive</a></li>
            
              <li><a href="/myblog/search/">Search</a></li>
            
              <li><a href="/myblog/tags/">Tags</a></li>
            
              <li><a href="/myblog/about/">About</a></li>
            
              <li><a href="/myblog/contact/">Contact</a></li>
            
          </ul>
        </nav>
      </div>
    </header>

    <article>
        <h1>Search</h1>
        <div class="post-meta">
          <span class="post-date">Date: December 03, 2024</span> |
          <span class="reading-time">Estimated Reading Time: 5 min</span> |
          <span class="post-author">Author: Jason</span>
        </div>
        <main class="container">
            <h1>Search</h1>

<!-- æ·»åŠ æœç´¢è¡¨å• -->
<form id="search-form" action="/" method="get">
  <input type="text" id="search-input" name="q" placeholder="Search" autocomplete="off" autofocus>
</form>

<!-- æœç´¢ç»“æžœå®¹å™¨ -->
<div id="results-container"></div>

<script>
  async function fetchPosts() {
    // ä½¿ç”¨ Jekyll çš„ site.baseurl ç¡®ä¿è·¯å¾„æ­£ç¡®
    const response = await fetch('/myblog/search.json');
    if (!response.ok) {
      throw new Error('Network response was not ok');
    }
    return response.json();
  }

  document.addEventListener('DOMContentLoaded', async () => {
    const input = document.getElementById('search-input');
    const resultsContainer = document.getElementById('results-container');

    let posts = [];
    try {
      posts = await fetchPosts();
    } catch (error) {
      console.error('Failed to fetch search.json:', error);
      resultsContainer.innerHTML = '<p>Failed to load search data.</p>';
      return;
    }

    // å¤„ç†ç”¨æˆ·è¾“å…¥å¹¶è¿‡æ»¤ç»“æžœ
    input.addEventListener('input', () => {
      const query = input.value.toLowerCase();
      const filteredPosts = posts.filter(post =>
        post.title.toLowerCase().includes(query) ||
        post.content.toLowerCase().includes(query)
      );

      // æ˜¾ç¤ºæœç´¢ç»“æžœ
      if (filteredPosts.length > 0) {
        resultsContainer.innerHTML = filteredPosts.map(post => `
          <div class="search-result">
            <a href="${post.url}">${post.title}</a> - ${new Date(post.date).toLocaleDateString()}
            <p>${post.content.slice(0, 100)}...</p> <!-- å¯é€‰ï¼šæ˜¾ç¤ºæ–‡ç« å†…å®¹çš„éƒ¨åˆ† -->
          </div>
        `).join('');
      } else {
        resultsContainer.innerHTML = '<p>No results found.</p>';
      }
    });
  });
</script>
        </main>
        
    </article>
    <!-- Footer -->
    <footer class="footer">
      <p>&copy; 2024 Jason'Blog</p>
    </footer>
</body>


<!--<link rel="stylesheet" href="/myblog/assets/main.css">-->
<link rel="stylesheet" href="/myblog/assets/css/custom.css">