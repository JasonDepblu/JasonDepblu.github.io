{"ast":null,"code":"// src/components/Message.jsx\nimport React from'react';import{marked}from'marked';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Message(_ref){let{type,content,isStreaming=false,error=false,checkAnswerHandler=null}=_ref;// 渲染Markdown内容\nconst renderContent=()=>{// 检查是否是带有检查按钮的特殊消息对象\nif(content&&typeof content==='object'&&content.type==='processing-message'){return/*#__PURE__*/_jsxs(\"div\",{className:\"processing-message\",children:[/*#__PURE__*/_jsx(\"p\",{children:content.message}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>checkAnswerHandler&&checkAnswerHandler(content.requestId),className:\"check-button\",children:\"\\u68C0\\u67E5\\u662F\\u5426\\u5DF2\\u5B8C\\u6210\"})]});}// 正常的字符串内容\nif(typeof content==='string'){try{// 对AI消息使用Markdown渲染\nif(type==='ai'&&!error){return/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:marked.parse(content)}});}}catch(e){console.error('Markdown渲染错误:',e);}}// 默认情况或渲染失败时直接显示文本\nreturn/*#__PURE__*/_jsx(\"p\",{children:content});};const className=`${type}-message ${isStreaming?'streaming':''} ${error?'error-message':''}`;return/*#__PURE__*/_jsxs(\"div\",{className:className,children:[renderContent(),isStreaming&&/*#__PURE__*/_jsx(\"div\",{className:\"stream-indicator\",children:\"\\u6B63\\u5728\\u751F\\u6210\\u56DE\\u7B54...\"})]});}export default Message;","map":{"version":3,"names":["React","marked","jsx","_jsx","jsxs","_jsxs","Message","_ref","type","content","isStreaming","error","checkAnswerHandler","renderContent","className","children","message","onClick","requestId","dangerouslySetInnerHTML","__html","parse","e","console"],"sources":["/Users/depblu/Documents/GitHub/JasonDepblu.github.io/src/components/Message.jsx"],"sourcesContent":["// src/components/Message.jsx\nimport React from 'react';\nimport { marked } from 'marked';\n\nfunction Message({ type, content, isStreaming = false, error = false, checkAnswerHandler = null }) {\n  // 渲染Markdown内容\n  const renderContent = () => {\n    // 检查是否是带有检查按钮的特殊消息对象\n    if (content && typeof content === 'object' && content.type === 'processing-message') {\n      return (\n        <div className=\"processing-message\">\n          <p>{content.message}</p>\n          <button\n            onClick={() => checkAnswerHandler && checkAnswerHandler(content.requestId)}\n            className=\"check-button\"\n          >\n            检查是否已完成\n          </button>\n        </div>\n      );\n    }\n\n    // 正常的字符串内容\n    if (typeof content === 'string') {\n      try {\n        // 对AI消息使用Markdown渲染\n        if (type === 'ai' && !error) {\n          return <div dangerouslySetInnerHTML={{ __html: marked.parse(content) }} />;\n        }\n      } catch (e) {\n        console.error('Markdown渲染错误:', e);\n      }\n    }\n\n    // 默认情况或渲染失败时直接显示文本\n    return <p>{content}</p>;\n  };\n\n  const className = `${type}-message ${isStreaming ? 'streaming' : ''} ${error ? 'error-message' : ''}`;\n\n  return (\n    <div className={className}>\n      {renderContent()}\n      {isStreaming && <div className=\"stream-indicator\">正在生成回答...</div>}\n    </div>\n  );\n}\n\nexport default Message;"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,MAAM,KAAQ,QAAQ,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhC,QAAS,CAAAC,OAAOA,CAAAC,IAAA,CAAmF,IAAlF,CAAEC,IAAI,CAAEC,OAAO,CAAEC,WAAW,CAAG,KAAK,CAAEC,KAAK,CAAG,KAAK,CAAEC,kBAAkB,CAAG,IAAK,CAAC,CAAAL,IAAA,CAC/F;AACA,KAAM,CAAAM,aAAa,CAAGA,CAAA,GAAM,CAC1B;AACA,GAAIJ,OAAO,EAAI,MAAO,CAAAA,OAAO,GAAK,QAAQ,EAAIA,OAAO,CAACD,IAAI,GAAK,oBAAoB,CAAE,CACnF,mBACEH,KAAA,QAAKS,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjCZ,IAAA,MAAAY,QAAA,CAAIN,OAAO,CAACO,OAAO,CAAI,CAAC,cACxBb,IAAA,WACEc,OAAO,CAAEA,CAAA,GAAML,kBAAkB,EAAIA,kBAAkB,CAACH,OAAO,CAACS,SAAS,CAAE,CAC3EJ,SAAS,CAAC,cAAc,CAAAC,QAAA,CACzB,4CAED,CAAQ,CAAC,EACN,CAAC,CAEV,CAEA;AACA,GAAI,MAAO,CAAAN,OAAO,GAAK,QAAQ,CAAE,CAC/B,GAAI,CACF;AACA,GAAID,IAAI,GAAK,IAAI,EAAI,CAACG,KAAK,CAAE,CAC3B,mBAAOR,IAAA,QAAKgB,uBAAuB,CAAE,CAAEC,MAAM,CAAEnB,MAAM,CAACoB,KAAK,CAACZ,OAAO,CAAE,CAAE,CAAE,CAAC,CAC5E,CACF,CAAE,MAAOa,CAAC,CAAE,CACVC,OAAO,CAACZ,KAAK,CAAC,eAAe,CAAEW,CAAC,CAAC,CACnC,CACF,CAEA;AACA,mBAAOnB,IAAA,MAAAY,QAAA,CAAIN,OAAO,CAAI,CAAC,CACzB,CAAC,CAED,KAAM,CAAAK,SAAS,CAAG,GAAGN,IAAI,YAAYE,WAAW,CAAG,WAAW,CAAG,EAAE,IAAIC,KAAK,CAAG,eAAe,CAAG,EAAE,EAAE,CAErG,mBACEN,KAAA,QAAKS,SAAS,CAAEA,SAAU,CAAAC,QAAA,EACvBF,aAAa,CAAC,CAAC,CACfH,WAAW,eAAIP,IAAA,QAAKW,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,yCAAS,CAAK,CAAC,EAC9D,CAAC,CAEV,CAEA,cAAe,CAAAT,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}